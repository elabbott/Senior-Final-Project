<script>
	$(document).ready(function() {
		$('.table').DataTable({});
	})
</script>

<header>
	<%= render 'layouts/navigation' %>
</header>
<% if current_user.franchise == false && current_user.user_type == 2 %>



<h1 class="text-center">Welcome, <%= current_user.fname %> <%= current_user.lname %></h1>

<br/>
<br/>
<table>
	<thead>
		<tr>
			<th><strong>Click here to select your Child: </strong></th>
			<th class="text-right"><strong>Click here to give Feedback: </strong></br></th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><%= button_to "Select Child", schools_path, method: :get, :class => "btn btn-primary"%></td>
			<td class="text-right"><%= link_to "Feedback", new_feedback_path, :class => "btn btn-primary"%></td>
		</tr>
	</tbody>
</table>

<table>

<tbody>
	<tr>
		<td>
			<div>
				<table class="table table-striped table-bordered">
					<thead>
						<tr>
							<th>Name</th>
							<th>School</th>
							<th>Meal Control</th>
			
						</tr>
					</thead>
					<tbody>
						<%Child.where(:user_id => current_user.id).each do |child|%>
						<tr>
							<td><%= child.name%></td>
							<td><%= School.find_by_id(child.school_id).name%></td>
							<td><%= button_to "Add Meal", add_meal_to_child_path(child.id), method: :get%></td>
			
						</tr>
						<%end%>
					</tbody>
				</table>
				
			</div>
		</td>
		<td>
			<table class="table table-bordered table-striped">
				<thead>
					<tr>
						<th>Meal</th>
						<th>Price</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<%= Order.where(:id => current_user.id).each do |m| %>
							<%= Meal.where(:id => m.id).each do |meals| %>
								<td>meals.name</td>
								<td>meals.price</td>
							<% end %>
						<% end %>
					</tr>
				</tbody>
			</table>
			<strong>Total: </strong>
		</td>
	</tr>
</tbody>
</table>
<% elsif current_user.user_type == 2 && current_user.approved == true%>
	<h1 class="text-center">Welcome, <%= current_user.fname %> <%= current_user.lname %>.</h1>
		<table class="table table-striped table-bordered">
		<thead>
		Your franchise list.
			<tr>
				<td>ID</td>
				<td>School ID</td>
				<td>Approved</td>
			</tr>
		</thead>
		<tbody>
			<% Franchise.where(:user_id => current_user.id).each do |franchises|%>
			<tr>
				<td><%= franchises.id%></td>
				<td><%= franchises.school_id%></td>
				<td><%= franchises.approved%></td>
				<td><%= link_to "View Franchise Page", franchise, :class => "btn btn-primary" %></td>
			</tr>
			<% end %>
		</tbody>
	</table>

<% elsif current_user.user_type == 2 && current_user.approved == false && current_user.franchise == true%>
	<h1 class="text-center">Welcome, Unapproved Franchise Owner: <%= current_user.fname %> <%= current_user.lname %>.</h1>
		<div class="text-center">
		<%= link_to "Request Franchise", new_franchise_path, :class => "btn btn-primary" %>
		</div>
		<table class="table table-striped table-bordered">
		<thead>
		Schools in your zipcode.
			<tr>
				<td>Name</td>
			</tr>
		</thead>
		<tbody>
			<% School.where(:zipcode => current_user.zipcode).each do |schools|%>
			<tr>
				<td><%= schools.name%></td>
			</tr>
			<% end %>
		</tbody>
	</table>


<% elsif current_user.user_type == 3 %>
	<h1>Welcome, Chef <%= current_user.fname%> <%= current_user.lname%></h1>
	
	<div class="text-center">
		<%= link_to "Create Meal", new_meal_path, :class => "btn btn-primary" %>
	</div>
	<table class="table table-striped table-bordered">
		<thead>
			<tr>
				<td>Name</td>
				<td>Description</td>
				<td>Calories</td>
				<td>Price</td>
				<td>Edit</td>
			</tr>
		</thead>
		<tbody>
			<% Meal.all.each do |meals|%>
			<tr>
				<td><%= meals.name%></td>
				<td><%= meals.description%></td>
				<td><%= meals.calories%></td>
				<td><%= meals.price %></td>
				<td><%= link_to "Edit Meal", edit_meal_path(meals), :class => "btn btn-primary"%></td>
			</tr>
			<% end %>
		</tbody>
	</table>
	
<% elsif current_user.user_type == 4 %>
	<h1 class="text-center">Hello, Admin <%= current_user.fname%> <%= current_user.lname %></h1>
	
	<div class="text-center">
		<%= link_to "Active Admin Dashboard", admin_dashboard_path, :class => 'btn btn-primary btn-lg'%>
	</div>
<<<<<<< HEAD
	<div class="text-center">
		<%= link_to "Children Table", children_path, :class => 'btn btn-primary btn-lg'%>
	</div>
	<div class="text-center">
		<%= link_to "Meals Table", meals_path, :class => 'btn btn-primary btn-lg'%>
	</div>
	<div class="text-center">
		<%= link_to "Schools Table", schools_path, :class => 'btn btn-primary btn-lg'%>
	</div>
	<div class="text-center">
		<%= link_to "Franchise Table", franchises_path, :class => 'btn btn-primary btn-lg'%>
	</div>
	<div class="text-center">
		<%= link_to "Feedback Table", feedbacks_path, :class => 'btn btn-primary btn-lg'%>
	</div>
	<div class="text-center">
		<%= link_to "Payment Info Table", payment_infos_path, :class => 'btn btn-primary btn-lg'%>
	</div>
=======
	<table class="table table-striped table-bordered">
		<thead>
		Franchises Owners that need approval.
			<tr>
				<td>Name</td>
				<td>Zipcode</td>
				<td>email</td>
			</tr>
		</thead>
		<tbody>
			<% User.where(:approved => false).each do |users|%>
			<tr>
				<td><%= users.fname%>, <%= users.lname%></td>
				<td><%= users.zipcode %></td>
				<td><%= users.email%></td>
				<td><%= button_to 'Approve'  %> </td>
			</tr>
			<% end %>
		</tbody>
	</table>
	<table class="table table-striped table-bordered">
		<thead>
		Franchises that need approval.
			<tr>
				<td>Owner ID</td>
				<td>School ID</td>
				<td>Zipcode</td>
			</tr>
		</thead>
		<tbody>
			<% Franchise.where(:approved => false ).each do |franchises|%> <!-- not quite perfect still shows unapproved users -->
			<tr>
				<td><%= franchises.user_id %></td>
				<td><%= franchises.school_id %></td>
				<td><%= franchises.zipcode %></td>
				<td><%= button_to 'Approve' %> </td>
			</tr>
			<% end %>
		</tbody>
	</table>
>>>>>>> 2b6b2f320e7b218a667af22538aa38019b3e6769
<% end %>

